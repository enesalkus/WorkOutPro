<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="WorkOutPro.Pages.TrainingExercisesPage"
             Title="Completed Exercises"
             BackgroundColor="{StaticResource BeFitBackground}">

    <Grid RowDefinitions="Auto,Auto,*" Padding="15">
        
        <!-- Add New Exercise Form -->
        <Frame Grid.Row="0" BackgroundColor="{StaticResource BeFitCard}" CornerRadius="12" Padding="15" HasShadow="True" Margin="0,0,0,10">
            <VerticalStackLayout Spacing="10">
                <Label Text="Add New Exercise" FontSize="18" FontAttributes="Bold" TextColor="{StaticResource BeFitPrimary}"/>
                
                <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                    <VerticalStackLayout Grid.Column="0" Spacing="5">
                        <Label Text="Exercise Type" FontSize="12" TextColor="{StaticResource BeFitTextLight}"/>
                        <Frame BackgroundColor="White" BorderColor="{StaticResource BeFitSecondary}" CornerRadius="8" Padding="5" HasShadow="False">
                            <Picker x:Name="ExerciseTypePicker" 
                                    Title="-- Select --" 
                                    TitleColor="{StaticResource BeFitTextLight}"
                                    TextColor="{StaticResource BeFitText}"
                                    ItemDisplayBinding="{Binding Name}"/>
                        </Frame>
                    </VerticalStackLayout>
                    
                    <VerticalStackLayout Grid.Column="1" Spacing="5">
                        <Label Text="Training Session" FontSize="12" TextColor="{StaticResource BeFitTextLight}"/>
                        <Frame BackgroundColor="White" BorderColor="{StaticResource BeFitSecondary}" CornerRadius="8" Padding="5" HasShadow="False">
                            <Picker x:Name="SessionPicker" 
                                    Title="-- Select --" 
                                    TitleColor="{StaticResource BeFitTextLight}"
                                    TextColor="{StaticResource BeFitText}"
                                    ItemDisplayBinding="{Binding DisplayText}"/>
                        </Frame>
                    </VerticalStackLayout>
                </Grid>
                
                <Grid ColumnDefinitions="*,*,*" ColumnSpacing="10">
                    <VerticalStackLayout Grid.Column="0" Spacing="3">
                        <Label Text="Load (kg)" FontSize="12" TextColor="{StaticResource BeFitTextLight}"/>
                        <Frame BackgroundColor="White" BorderColor="{StaticResource BeFitSecondary}" CornerRadius="8" Padding="8,5" HasShadow="False">
                            <Entry x:Name="LoadEntry" 
                                   Keyboard="Numeric" 
                                   Placeholder="e.g. 50"
                                   PlaceholderColor="{StaticResource BeFitTextLight}"
                                   TextColor="{StaticResource BeFitText}"/>
                        </Frame>
                    </VerticalStackLayout>
                    
                    <VerticalStackLayout Grid.Column="1" Spacing="3">
                        <Label Text="Sets" FontSize="12" TextColor="{StaticResource BeFitTextLight}"/>
                        <Frame BackgroundColor="White" BorderColor="{StaticResource BeFitSecondary}" CornerRadius="8" Padding="8,5" HasShadow="False">
                            <Entry x:Name="SetsEntry" 
                                   Keyboard="Numeric" 
                                   Placeholder="e.g. 3"
                                   PlaceholderColor="{StaticResource BeFitTextLight}"
                                   TextColor="{StaticResource BeFitText}"/>
                        </Frame>
                    </VerticalStackLayout>
                    
                    <VerticalStackLayout Grid.Column="2" Spacing="3">
                        <Label Text="Reps" FontSize="12" TextColor="{StaticResource BeFitTextLight}"/>
                        <Frame BackgroundColor="White" BorderColor="{StaticResource BeFitSecondary}" CornerRadius="8" Padding="8,5" HasShadow="False">
                            <Entry x:Name="RepsEntry" 
                                   Keyboard="Numeric" 
                                   Placeholder="e.g. 10"
                                   PlaceholderColor="{StaticResource BeFitTextLight}"
                                   TextColor="{StaticResource BeFitText}"/>
                        </Frame>
                    </VerticalStackLayout>
                </Grid>
                
                <Button Text="+ Add Exercise" 
                        BackgroundColor="{StaticResource BeFitPrimary}"
                        TextColor="White"
                        CornerRadius="10"
                        FontSize="16"
                        Padding="20,12"
                        Clicked="OnAddClicked"/>
            </VerticalStackLayout>
        </Frame>
        
        <!-- List Header -->
        <Label Grid.Row="1" Text="Completed Exercises" FontSize="16" FontAttributes="Bold" TextColor="{StaticResource BeFitText}" Margin="0,10,0,5"/>
        
        <!-- Exercises List -->
        <CollectionView Grid.Row="2" x:Name="ExercisesList" SelectionMode="None">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame BackgroundColor="{StaticResource BeFitCard}" 
                           CornerRadius="12" 
                           Padding="15" 
                           Margin="0,5"
                           HasShadow="True">
                        <Grid RowDefinitions="Auto,Auto" RowSpacing="10">
                            
                            <!-- Top Row: Exercise Info -->
                            <HorizontalStackLayout Grid.Row="0" Spacing="20">
                                <VerticalStackLayout>
                                    <Label Text="Exercise Type" FontSize="11" TextColor="{StaticResource BeFitTextLight}"/>
                                    <Label Text="{Binding ExerciseTypeName}" 
                                           FontSize="14" 
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource BeFitPrimary}"/>
                                </VerticalStackLayout>
                                
                                <VerticalStackLayout>
                                    <Label Text="Session" FontSize="11" TextColor="{StaticResource BeFitTextLight}"/>
                                    <Label Text="{Binding SessionDate}" 
                                           FontSize="13"
                                           TextColor="{StaticResource BeFitText}"/>
                                </VerticalStackLayout>
                            </HorizontalStackLayout>
                            
                            <!-- Bottom Row: Stats and Actions -->
                            <Grid Grid.Row="1" ColumnDefinitions="Auto,Auto,Auto,*,Auto,Auto,Auto" ColumnSpacing="8">
                                
                                <Frame Grid.Column="0" BackgroundColor="{StaticResource BeFitSecondary}" CornerRadius="8" Padding="8,4">
                                    <Label Text="{Binding LoadText}" TextColor="White" FontSize="12"/>
                                </Frame>
                                
                                <Frame Grid.Column="1" BackgroundColor="{StaticResource BeFitSuccess}" CornerRadius="8" Padding="8,4">
                                    <Label Text="{Binding SetsText}" TextColor="White" FontSize="12"/>
                                </Frame>
                                
                                <Frame Grid.Column="2" BackgroundColor="{StaticResource BeFitInfo}" CornerRadius="8" Padding="8,4">
                                    <Label Text="{Binding RepsText}" TextColor="White" FontSize="12"/>
                                </Frame>
                                
                                <Button Grid.Column="4" 
                                        Text="Details" 
                                        BackgroundColor="{StaticResource BeFitInfo}"
                                        TextColor="White"
                                        CornerRadius="6"
                                        Padding="10,5"
                                        FontSize="12"
                                        CommandParameter="{Binding}"
                                        Clicked="OnDetailClicked"/>
                                
                                <Button Grid.Column="5" 
                                        Text="Edit" 
                                        BackgroundColor="{StaticResource BeFitWarning}"
                                        TextColor="{StaticResource BeFitText}"
                                        CornerRadius="6"
                                        Padding="10,5"
                                        FontSize="12"
                                        CommandParameter="{Binding}"
                                        Clicked="OnEditClicked"/>
                                
                                <Button Grid.Column="6" 
                                        Text="Delete" 
                                        BackgroundColor="{StaticResource BeFitDanger}"
                                        TextColor="White"
                                        CornerRadius="6"
                                        Padding="10,5"
                                        FontSize="12"
                                        CommandParameter="{Binding}"
                                        Clicked="OnDeleteClicked"/>
                            </Grid>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
            <CollectionView.EmptyView>
                <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center">
                    <Label Text="ðŸ‹ï¸" FontSize="60"/>
                    <Label Text="No exercises yet" 
                           FontSize="18" 
                           TextColor="{StaticResource BeFitTextLight}"/>
                </VerticalStackLayout>
            </CollectionView.EmptyView>
        </CollectionView>
        
    </Grid>

</ContentPage>
